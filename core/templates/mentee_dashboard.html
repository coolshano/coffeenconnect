{% load static %}
<!DOCTYPE html>
<html>
<head>
<title>Mentee Dashboard</title>

<style>
body {
    font-family: "Segoe UI", system-ui;
    background:#f4f6f9;
    margin:0;
}

/* Layout */
.layout {
    display:grid;
    grid-template-columns: 300px 1fr;
    max-width:1200px;
    margin:auto;
    gap:30px;
    padding:40px;
}

/* LEFT PANEL */
.profile {
    background:white;
    border-radius:18px;
    padding:30px;
    box-shadow:0 10px 35px rgba(0,0,0,0.08);
    text-align:center;
}

.profile img {
    width:120px;
    height:120px;
    border-radius:50%;
    object-fit:cover;
    margin-bottom:12px;
}

.profile h2 {
    margin:10px 0 2px;
    font-size:24px;
}

.profile h4 {
    margin:0;
    color:#666;
    font-weight:600;
}

/* Unified buttons */
.profile-btn {
    display:block;
    width:100%;
    padding:14px 0;
    margin-top:14px;
    border-radius:10px;
    font-weight:600;
    font-size:16px;
    text-align:center;
    text-decoration:none;
    border:none;
    cursor:pointer;
}

/* Button colors */
.profile-btn.edit {
    background:#0d6efd;
    color:white;
}

.profile-btn.logout {
    background:#dc3545;
    color:white;
}

.profile-btn.password {
    background:#6c757d;
    color:white;
}

.profile-btn.edit:hover { background:#0b5ed7; }
.profile-btn.logout:hover { background:#bb2d3b; }
.profile-btn.password:hover { background:#5c636a; }

/* RIGHT PANEL */
.matches h1 {
    margin-bottom:25px;
    font-size:28px;
}

/* Mentor Cards */
.card {
    background:white;
    border-radius:16px;
    padding:22px 26px;
    margin-bottom:20px;
    box-shadow:0 10px 25px rgba(0,0,0,0.08);
    display:grid;
    grid-template-columns: 1fr 100px 140px;
    align-items:center;
    gap:20px;
}

/* Mentor Info */
.mentor h3 {
    margin:0;
    color:#0d6efd;
    font-size:18px;
    font-weight:700;
}

.mentor p {
    margin-top:6px;
    font-size:14px;
    color:#444;
    line-height:1.5;
}

/* Score */
.score {
    text-align:center;
    font-size:20px;
    font-weight:800;
    color:#16a34a;
}

/* Right aligned action */
.card-actions {
    display:flex;
    justify-content:flex-end;
}

/* Match Buttons */
.btn {
    background:#28a745;
    color:white;
    border:none;
    padding:12px 22px;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
}

.pending { background:#ffc107; color:black; }
.accepted { background:#0d6efd; }
</style>
</head>

<body>

<div class="layout">

<!-- LEFT PROFILE -->
<div class="profile">

    {% if mentee.profile_image %}
        <img src="{{ mentee.profile_image.url }}">
    {% else %}
        <img src="{% static 'core/images/default-avatar.png' %}">
    {% endif %}

    <h2>{{ mentee.name }}</h2>
    <h4>{{ mentee.country }}</h4>

    <a href="/mentee/profile/" class="profile-btn edit">Edit Profile</a>

    <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button class="profile-btn logout">Logout</button>
    </form>

    <a href="{% url 'password_change' %}" class="profile-btn password">
        Change Password
    </a>

</div>

<!-- RIGHT MATCHES -->
<div class="matches">
    <h1>Your Mentor Matches</h1>

    {% for m in mentors %}
    <div class="card">

        <div class="mentor">
            <h3>{{ m.mentor.name }}</h3>
            <p>{{ m.mentor.profile_text|truncatewords:18 }}</p>
        </div>

        <div class="score">{{ m.score }}%</div>

        <div class="card-actions">
            {% if m.status == "pending" %}
                <button class="btn pending">Pending</button>
            {% elif m.status == "accepted" %}
                <button class="btn accepted">Connected</button>
            {% else %}
                <form method="post" action="{% url 'request_mentor' m.mentor.id %}">
                    {% csrf_token %}
                    <button class="btn">Request</button>
                </form>
            {% endif %}
        </div>

    </div>
    {% empty %}
        <p>No mentors found yet.</p>
    {% endfor %}

</div>

</div>

</body>
</html>
